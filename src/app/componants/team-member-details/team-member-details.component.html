<div class="container py-4">
  <div class="card shadow-lg border-0 rounded-3">
    <div class="card-header bg-gradient bg-primary text-white d-flex align-items-center p-4">
      <div class="position-relative">
        <img [src]="'http://localhost:8080' + member?.image" alt="Photo"
          class="rounded-circle border border-3 border-white shadow" width="100" height="100">
        <span class="position-absolute bottom-0 end-0 bg-success rounded-circle p-2 border border-white"></span>
      </div>
      <div class="ms-4">
        <h3 class="mb-1 fw-bold">{{ member?.name }}</h3>
        <p class="mb-0 text-light-emphasis">
          <i class="fas fa-briefcase me-2"></i>{{ member?.jobTitle || 'Titre non défini' }}
        </p>
      </div>
    </div>

    <div class="card-body p-4">
      <div class="row g-4">
        <div class="col-md-6">
          <div class="card h-100 border-0 shadow-sm">
            <div class="card-header bg-light">
              <h5 class="mb-0 text-primary">
                <i class="fas fa-info-circle me-2"></i>Informations générales
              </h5>
            </div>
            <div class="card-body">
              <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="fas fa-signature me-2 text-muted"></i>Initiales</span>
                  <span class="badge bg-primary rounded-pill">{{ member?.initial }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="fas fa-user-tag me-2 text-muted"></i>Rôle</span>
                  <span class="badge bg-info text-dark rounded-pill">{{ member?.role }}</span>
                </li>

                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="fas fa-chart-line me-2 text-muted"></i>Expérience</span>
                  <span>{{ member?.experienceRange || 'Non spécifiée' }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="fas fa-star me-2 text-muted"></i>Status</span>
                  <span>{{ member?.status }}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card h-100 border-0 shadow-sm">
            <div class="card-header bg-light">
              <h5 class="mb-0 text-primary">
                <i class="fas fa-calendar-check me-2"></i>Disponibilité
              </h5>
            </div>
            <div class="card-body">
              <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="fas fa-calendar-plus me-2 text-muted"></i>Date de début</span>
                  <span>{{ member?.startDate || 'N/A' }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="fas fa-calendar-minus me-2 text-muted"></i>Date de fin</span>
                  <span>{{ member?.endDate || 'N/A' }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span><i class="fas fa-money-bill-wave me-2 text-muted"></i>Coût journalier</span>
                  <span class="fw-bold">{{ member?.cost ? member?.cost + ' TND' : 'Non défini' }}</span>
                </li>

              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <div class="card border-0 shadow-sm">
            <div class="card-header bg-light">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0 text-primary">
                  <i class="fas fa-umbrella-beach me-2"></i>Jours de congé
                </h5>
                <select class="form-select w-auto" [value]="selectedMonth.toISOString()"
                  (change)="onMonthChange($event)">
                  <option *ngFor="let month of months" [value]="month.value.toISOString()">
                    {{ month.label }}
                  </option>
                </select>
              </div>
            </div>
            <div class="card-body">
              <div *ngIf="filteredHolidays.length; else noHolidays" class="holidays-container">
                <div class="row g-3">
                  <div *ngFor="let day of filteredHolidays" class="col-md-4 col-sm-6">
                    <div
                      class="holiday-card p-3 bg-light rounded-3 shadow-sm d-flex justify-content-between align-items-center">
                      <div>
                        <div class="fw-bold">{{ day.split('|')[0] | date:'EEEE' }}</div>
                        <div class="text-muted">{{ day.split('|')[0] | date:'dd MMMM yyyy' }}</div>
                        <div class="badge bg-secondary mt-2">
                          {{ day.split('|')[1] }}
                        </div>

                      </div>
                      <button class="btn btn-sm btn-outline-danger" (click)="deleteHoliday(day)" [disabled]="isDeleting"
                        title="Supprimer ce congé">
                        <i class="fas" [ngClass]="isDeleting ? 'fa-spinner fa-spin' : 'fa-trash-alt'"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <ng-template #noHolidays>
                <div class="text-center py-4">
                  <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                  <p class="text-muted mb-0">Aucun congé pour {{ selectedMonth | date:'MMMM yyyy' }}</p>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
      </div>


      <div class="card-footer bg-light p-3 text-end">
        <a routerLink="/TeamMember" class="btn btn-outline-primary">
          <i class="fas fa-arrow-left me-2"></i>Retour à l'équipe
        </a>
      </div>
    </div>
  </div>